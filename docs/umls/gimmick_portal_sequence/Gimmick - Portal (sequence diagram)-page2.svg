<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="202px" preserveAspectRatio="none" style="width:719px;height:202px;background:#003153;" version="1.1" viewBox="0 0 719 202" width="719px" zoomAndPan="magnify"><defs/><g><rect fill="#003153" height="36.7373" id="_title" style="stroke:#003153;stroke-width:0.0;" width="336" x="190" y="10"/><text fill="#D9D3D0" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="326" x="195" y="37.1182">Within-Range Notification</text><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="84.752" y2="166.3506"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="315" x2="315" y1="84.752" y2="166.3506"/><rect fill="#003153" height="31.0146" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="20" y="52.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="27" y="73.8125">ITransferable</text><rect fill="#003153" height="31.0146" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="20" y="165.3506"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="27" y="186.4258">ITransferable</text><rect fill="#003153" height="31.0146" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="54" x="288" y="52.7373"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40" x="295" y="73.8125">Portal</text><rect fill="#003153" height="31.0146" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="54" x="288" y="165.3506"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40" x="295" y="186.4258">Portal</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="712" y1="95.752" y2="95.752"/><polygon fill="#D9D3D0" points="84,114.5513,74,118.5513,84,122.5513,80,118.5513" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="78" x2="314" y1="118.5513" y2="118.5513"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179" x="90" y="113.8218">OnPortalEnter(portal= this)</text><polygon fill="#D9D3D0" points="84,144.3506,74,148.3506,84,152.3506,80,148.3506" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="78" x2="314" y1="148.3506" y2="148.3506"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168" x="90" y="143.6211">OnPortalExit(portal= this)</text><!--MD5=[4aebbd76ee95f503d47158939b31829d]
@startuml Gimmick - Portal (sequence diagram)
!theme blueprint

Title Basic Translation

ITransferable -> ITransferable : check
note right
他のポータルの転送処理中でないか？
このポータルは要件と合っているか？
end note

ITransferable -> Portal : RequestTransfer(target= this)
note right
例えばplayerにITransferableを実装した場合、
wキーが押された時にportalの範囲内に入っているか確認して
リクエストを送信するなど
end note

Portal -> Portal : OnTranferRequest.OnNext()

Portal - -> ITransferable : ack (returns of RequestTransfer)

ITransferable -> ITransferable : procedure ...
note right
E.g. 暗転・ポータルのもとに歩いていくアニメーション
end note

ITransferable -> Portal : ReadyTransfer(target= this)

Portal -> Portal : OnTranferReady.OnNext()

Portal - -> ITransferable : ack (returns of ReadyTransfer)

Portal -> ITransferable : transform.position =

Portal -> ITransferable : CompleteTransfer(portal= this)
ITransferable -> ITransferable : procedure ...
note right
E.g. 明転・ポータルから出てくるアニメーション
end note

newpage Within-Range Notification

Portal -> ITransferable : OnPortalEnter(portal= this)
Portal -> ITransferable : OnPortalExit(portal= this)

@enduml

@startuml Gimmick - Portal (sequence diagram)





<style>
  root {
    BackgroundColor #003153
    FontColor #D9D3D0
    FontName Verdana
    HyperLinkColor #D9D3D0
    LineColor #D9D3D0
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor #D9D3D0
skinparam BackgroundColor #003153
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor #D9D3D0
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor #003153
  BarColor #D9D3D0
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Boundary {
  FontColor #D9D3D0
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor #D9D3D0
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor #003153
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Footer {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Header {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Hyperlink {
  Color #D9D3D0
}
skinparam IconPackage {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPrivate {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconProtected {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPublic {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam Note {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Object {
  BorderColor #D9D3D0
}
skinparam Package {
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam State {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeA {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeC {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeE {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeI {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeN {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam UseCaseStereoType {
  FontColor #D9D3D0
  FontName Verdana
}

Title Basic Translation

ITransferable -> ITransferable : check
note right
他のポータルの転送処理中でないか？
このポータルは要件と合っているか？
end note

ITransferable -> Portal : RequestTransfer(target= this)
note right
例えばplayerにITransferableを実装した場合、
wキーが押された時にportalの範囲内に入っているか確認して
リクエストを送信するなど
end note

Portal -> Portal : OnTranferRequest.OnNext()

Portal - -> ITransferable : ack (returns of RequestTransfer)

ITransferable -> ITransferable : procedure ...
note right
E.g. 暗転・ポータルのもとに歩いていくアニメーション
end note

ITransferable -> Portal : ReadyTransfer(target= this)

Portal -> Portal : OnTranferReady.OnNext()

Portal - -> ITransferable : ack (returns of ReadyTransfer)

Portal -> ITransferable : transform.position =

Portal -> ITransferable : CompleteTransfer(portal= this)
ITransferable -> ITransferable : procedure ...
note right
E.g. 明転・ポータルから出てくるアニメーション
end note

newpage Within-Range Notification

Portal -> ITransferable : OnPortalEnter(portal= this)
Portal -> ITransferable : OnPortalExit(portal= this)

@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 JST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: MS932
Language: ja
Country: JP
--></g></svg>